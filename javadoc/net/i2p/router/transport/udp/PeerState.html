<!DOCTYPE HTML>
<html lang="en">
<head>
<title>PeerState - Javadocs [I2P+ 0.9.50]</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: net.i2p.router.transport.udp, class: PeerState">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>

<script type="text/javascript" src="../../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>

<script type="text/javascript" src="../../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10,"i33":10,"i34":10,"i35":10,"i36":10,"i37":10,"i38":10,"i39":10,"i40":10,"i41":10,"i42":10,"i43":10,"i44":10,"i45":10,"i46":10,"i47":10,"i48":10,"i49":10,"i50":10,"i51":10,"i52":10,"i53":10,"i54":10,"i55":10,"i56":10,"i57":10,"i58":10,"i59":10,"i60":10,"i61":10,"i62":10,"i63":10,"i64":10,"i65":10,"i66":10,"i67":10,"i68":10,"i69":10,"i70":10,"i71":10,"i72":10,"i73":10,"i74":42,"i75":10,"i76":10,"i77":10,"i78":10,"i79":10,"i80":42,"i81":10,"i82":10,"i83":10,"i84":10,"i85":10,"i86":10,"i87":10,"i88":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<style type="text/css">.script{display:none!important}</style>

</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<div class="topNav"><a id="navbar.top">
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PeerState.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch script"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<div class="skipNav"><a id="skip.navbar.top">
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">net.i2p.router.transport.udp</a></div>
<h1 title="Class PeerState" class="title">Class PeerState</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree"><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a>
<div class="inheritance">net.i2p.router.transport.udp.PeerState</div>
</div>
<section class="description">
<hr>
<pre>public class <span class="typeNameLabel">PeerState</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></pre>
<div class="block">Contain all of the state about a UDP connection to a peer.
 This is instantiated only after a connection is fully established.

 Public only for UI peers page. Not a public API, not for external use.</div>
</section>
<section class="summary">
<ul class="blockList">
<li class="blockList">
<section class="fieldSummary"><a id="field.summary">
</a>
<h2>Field Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#LARGE_MTU">LARGE_MTU</a></span></code></th>
<td class="colLast">
<div class="block">IPv4 Max MTU

 based on measurements, 1350 fits nearly all reasonably small I2NP messages
 (larger I2NP messages may be up to 1900B-4500B, which isn't going to fit
 into a live network MTU anyway)

 TODO
 VTBM is 2646, it would be nice to fit in two large
 2646 / 2 = 1323
 1323 + 74 + 46 + 1 + (4 * 9) = 1480
 So why not make it 1492 (old ethernet is 1492, new is 1500)
 Changed to 1492 in 0.8.9

 BUT through 0.8.11,
 size estimate was bad, actual packet was up to 48 bytes bigger
 To be figured out.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#MAX_IPV6_MTU">MAX_IPV6_MTU</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#MAX_MTU">MAX_MTU</a></span></code></th>
<td class="colLast">
<div class="block">Max of IPv4 and IPv6 max MTUs</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#MIN_IPV6_MTU">MIN_IPV6_MTU</a></span></code></th>
<td class="colLast">
<div class="block">IPv6/UDP header is 48 bytes, so we want MTU % 16 == 0.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#MIN_MTU">MIN_MTU</a></span></code></th>
<td class="colLast">
<div class="block">IPv4 Min MTU

 596 gives us 588 IP byes, 568 UDP bytes, and with an SSU data message,
 522 fragment bytes, which is enough to send a tunnel data message in 2
 packets.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#RETRANSMISSION_PERIOD_WIDTH">RETRANSMISSION_PERIOD_WIDTH</a></span></code></th>
<td class="colLast">
<div class="block">how many packets will be considered within the retransmission rate calculation</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(net.i2p.router.RouterContext,net.i2p.router.transport.udp.UDPTransport,byte%5B%5D,int,net.i2p.data.Hash,boolean,int)">PeerState</a></span>&#8203;(<a href="../../RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx,
<a href="UDPTransport.html" title="class in net.i2p.router.transport.udp">UDPTransport</a>&nbsp;transport,
byte[]&nbsp;remoteIP,
int&nbsp;remotePort,
<a href="../../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;remotePeer,
boolean&nbsp;isInbound,
int&nbsp;rtt)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div class="script" role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t6" class="tableTab" onclick="show(32);">Deprecated Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>(package private) boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#acked(long,net.i2p.router.transport.udp.InboundMessageFragments.ModifiableLong)">acked</a></span>&#8203;(long&nbsp;messageId,
<a href="InboundMessageFragments.ModifiableLong.html" title="class in net.i2p.router.transport.udp">InboundMessageFragments.ModifiableLong</a>&nbsp;highestSeqNumAcked)</code></th>
<td class="colLast">
<div class="block">A full ACK was received.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>(package private) boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#acked(net.i2p.router.transport.udp.ACKBitfield,net.i2p.router.transport.udp.InboundMessageFragments.ModifiableLong)">acked</a></span>&#8203;(<a href="ACKBitfield.html" title="interface in net.i2p.router.transport.udp">ACKBitfield</a>&nbsp;bitfield,
<a href="InboundMessageFragments.ModifiableLong.html" title="class in net.i2p.router.transport.udp">InboundMessageFragments.ModifiableLong</a>&nbsp;highestSeqNumAcked)</code></th>
<td class="colLast">
<div class="block">A partial ACK was received.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#add(net.i2p.router.transport.udp.OutboundMessageState)">add</a></span>&#8203;(<a href="OutboundMessageState.html" title="class in net.i2p.router.transport.udp">OutboundMessageState</a>&nbsp;state)</code></th>
<td class="colLast">
<div class="block">TODO should this use a queue, separate from the list of msgs pending an ack?
  TODO bring back tail drop?
  TODO priority queue? (we don't implement priorities in SSU now)
  TODO backlog / pushback / block instead of dropping? Can't really block here.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#adjustClockSkew(long)">adjustClockSkew</a></span>&#8203;(long&nbsp;skew)</code></th>
<td class="colLast">
<div class="block">Update the moving-average clock skew based on the current difference.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>(package private) <a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="OutboundMessageState.html" title="class in net.i2p.router.transport.udp">OutboundMessageState</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#allocateSend(long)">allocateSend</a></span>&#8203;(long&nbsp;now)</code></th>
<td class="colLast">
<div class="block">Pick one or more messages we want to send and allocate them out of our window
 Adjusts the retransmit timer if necessary.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#changePort(int)">changePort</a></span>&#8203;(int&nbsp;newPort)</code></th>
<td class="colLast">
<div class="block">Caller should sync; UDPTransport must remove and add to peersByRemoteHost map</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#dataReceived()">dataReceived</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#dropOutbound()">dropOutbound</a></span>()</code></th>
<td class="colLast">
<div class="block">drop all outbound messages</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#ECNReceived()">ECNReceived</a></span>()</code></th>
<td class="colLast">
<div class="block">We received a backoff request, so cut our send window.</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>(package private) int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#expireInboundMessages()">expireInboundMessages</a></span>()</code></th>
<td class="colLast">
<div class="block">Expire partially received inbound messages, returning how many are still pending.</div>
</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#fetchPartialACKs(java.util.List)">fetchPartialACKs</a></span>&#8203;(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="ACKBitfield.html" title="interface in net.i2p.router.transport.udp">ACKBitfield</a>&gt;&nbsp;rv)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code>(package private) int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#finishMessages(long)">finishMessages</a></span>&#8203;(long&nbsp;now)</code></th>
<td class="colLast">
<div class="block">Expire / complete any outbound messages
 High usage -
 OutboundMessageFragments.getNextVolley() calls this 1st.</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>(package private) int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#fragmentOverhead()">fragmentOverhead</a></span>()</code></th>
<td class="colLast">
<div class="block">Packet overhead plus room for acks</div>
</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>(package private) int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#fragmentSize()">fragmentSize</a></span>()</code></th>
<td class="colLast">
<div class="block">how much payload data can we shove in there?</div>
</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getClockSkew()">getClockSkew</a></span>()</code></th>
<td class="colLast">
<div class="block">How far off is the remote peer from our clock, in milliseconds?
  A positive number means our clock is ahead of theirs.</div>
</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getConcurrentSends()">getConcurrentSends</a></span>()</code></th>
<td class="colLast">
<div class="block">2nd stat in CWND column, otherwise unused,
  candidate for removal</div>
</td>
</tr>
<tr class="altColor" id="i16">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getConcurrentSendWindow()">getConcurrentSendWindow</a></span>()</code></th>
<td class="colLast">
<div class="block">3rd stat in CWND column, otherwise unused,
  candidate for removal</div>
</td>
</tr>
<tr class="rowColor" id="i17">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getConsecutiveFailedSends()">getConsecutiveFailedSends</a></span>()</code></th>
<td class="colLast">
<div class="block">how many seconds have we sent packets without any ACKs received?</div>
</td>
</tr>
<tr class="altColor" id="i18">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getConsecutiveSendRejections()">getConsecutiveSendRejections</a></span>()</code></th>
<td class="colLast">
<div class="block">4th stat in CWND column, otherwise unused,
  candidate for removal</div>
</td>
</tr>
<tr class="rowColor" id="i19">
<td class="colFirst"><code>(package private) <a href="../../../data/SessionKey.html" title="class in net.i2p.data">SessionKey</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCurrentCipherKey()">getCurrentCipherKey</a></span>()</code></th>
<td class="colLast">
<div class="block">The AES key used to encrypt/decrypt packets, set only after the
 connection is established.</div>
</td>
</tr>
<tr class="altColor" id="i20">
<td class="colFirst"><code>(package private) <a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCurrentFullACKs()">getCurrentFullACKs</a></span>()</code></th>
<td class="colLast">
<div class="block">Grab a list of message ids (Long) that we want to send to the remote
 peer, regardless of the packet size, but don't remove it from our
 "want to send" list.</div>
</td>
</tr>
<tr class="rowColor" id="i21">
<td class="colFirst"><code>(package private) <a href="../../../data/SessionKey.html" title="class in net.i2p.data">SessionKey</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCurrentMACKey()">getCurrentMACKey</a></span>()</code></th>
<td class="colLast">
<div class="block">The AES key used to verify packets, set only after the connection is
 established.</div>
</td>
</tr>
<tr class="altColor" id="i22">
<td class="colFirst"><code>(package private) <a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCurrentResendACKs()">getCurrentResendACKs</a></span>()</code></th>
<td class="colLast">
<div class="block">Grab a list of message ids (Long) that we want to send to the remote
 peer, regardless of the packet size, but don't remove it from our
 "want to send" list.</div>
</td>
</tr>
<tr class="rowColor" id="i23">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getInactivityTime()">getInactivityTime</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i24">
<td class="colFirst"><code>(package private) <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>,&#8203;<a href="InboundMessageState.html" title="class in net.i2p.router.transport.udp">InboundMessageState</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getInboundMessages()">getInboundMessages</a></span>()</code></th>
<td class="colLast">
<div class="block">Fetch the internal id (Long) to InboundMessageState for incomplete inbound messages.</div>
</td>
</tr>
<tr class="rowColor" id="i25">
<td class="colFirst"><code>(package private) long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getIntroducerTime()">getIntroducerTime</a></span>()</code></th>
<td class="colLast">
<div class="block">the last time we used them as an introducer, or 0</div>
</td>
</tr>
<tr class="altColor" id="i26">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getKeyEstablishedTime()">getKeyEstablishedTime</a></span>()</code></th>
<td class="colLast">
<div class="block">when were the current cipher and MAC keys established/rekeyed?</div>
</td>
</tr>
<tr class="rowColor" id="i27">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastACKSend()">getLastACKSend</a></span>()</code></th>
<td class="colLast">
<div class="block">when did we last send an ACK to the peer?</div>
</td>
</tr>
<tr class="altColor" id="i28">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastReceiveTime()">getLastReceiveTime</a></span>()</code></th>
<td class="colLast">
<div class="block">when did we last receive a packet from them?</div>
</td>
</tr>
<tr class="rowColor" id="i29">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastSendFullyTime()">getLastSendFullyTime</a></span>()</code></th>
<td class="colLast">
<div class="block">when did we last send them a message that was ACKed?</div>
</td>
</tr>
<tr class="altColor" id="i30">
<td class="colFirst"><code>(package private) long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastSendOrPingTime()">getLastSendOrPingTime</a></span>()</code></th>
<td class="colLast">
<div class="block">Latest of last sent, last ACK, last ping</div>
</td>
</tr>
<tr class="rowColor" id="i31">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastSendTime()">getLastSendTime</a></span>()</code></th>
<td class="colLast">
<div class="block">when did we last send them a packet?</div>
</td>
</tr>
<tr class="altColor" id="i32">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMayDisconnect()">getMayDisconnect</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i33">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMessagesReceived()">getMessagesReceived</a></span>()</code></th>
<td class="colLast">
<div class="block">I2NP messages received.</div>
</td>
</tr>
<tr class="altColor" id="i34">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMessagesSent()">getMessagesSent</a></span>()</code></th>
<td class="colLast">
<div class="block">I2NP messages sent.</div>
</td>
</tr>
<tr class="rowColor" id="i35">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMTU()">getMTU</a></span>()</code></th>
<td class="colLast">
<div class="block">what is the largest packet we can send to the peer?</div>
</td>
</tr>
<tr class="altColor" id="i36">
<td class="colFirst"><code>(package private) <a href="../../../data/SessionKey.html" title="class in net.i2p.data">SessionKey</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNextCipherKey()">getNextCipherKey</a></span>()</code></th>
<td class="colLast">
<div class="block">The pending AES key for encrypting/decrypting packets if we are
 rekeying the connection, or null if we are not in the process
 of rekeying.</div>
</td>
</tr>
<tr class="rowColor" id="i37">
<td class="colFirst"><code>(package private) int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNextDelay(long)">getNextDelay</a></span>&#8203;(long&nbsp;now)</code></th>
<td class="colLast">
<div class="block">High usage -
 OutboundMessageFragments.getNextVolley() calls this 3rd, if allocateSend() returned null.</div>
</td>
</tr>
<tr class="altColor" id="i38">
<td class="colFirst"><code>(package private) <a href="../../../data/SessionKey.html" title="class in net.i2p.data">SessionKey</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNextMACKey()">getNextMACKey</a></span>()</code></th>
<td class="colLast">
<div class="block">The pending AES key for verifying packets if we are rekeying the
 connection, or null if we are not in the process of rekeying.</div>
</td>
</tr>
<tr class="rowColor" id="i39">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getOutboundMessageCount()">getOutboundMessageCount</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i40">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPacketsReceived()">getPacketsReceived</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i41">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPacketsReceivedDuplicate()">getPacketsReceivedDuplicate</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i42">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPacketsRetransmitted()">getPacketsRetransmitted</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i43">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPacketsTransmitted()">getPacketsTransmitted</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i44">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getReceiveBps()">getReceiveBps</a></span>()</code></th>
<td class="colLast">
<div class="block">An approximation, for display only</div>
</td>
</tr>
<tr class="rowColor" id="i45">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getReceiveMTU()">getReceiveMTU</a></span>()</code></th>
<td class="colLast">
<div class="block">Estimate how large the other side's MTU is.</div>
</td>
</tr>
<tr class="altColor" id="i46">
<td class="colFirst"><code>(package private) <a href="RemoteHostId.html" title="class in net.i2p.router.transport.udp">RemoteHostId</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRemoteHostId()">getRemoteHostId</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i47">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRemoteIP()">getRemoteIP</a></span>()</code></th>
<td class="colLast">
<div class="block">what IP is the peer sending and receiving packets on?</div>
</td>
</tr>
<tr class="altColor" id="i48">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html?is-external=true" title="class or interface in java.net" class="externalLink">InetAddress</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRemoteIPAddress()">getRemoteIPAddress</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i49">
<td class="colFirst"><code><a href="../../../data/Hash.html" title="class in net.i2p.data">Hash</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRemotePeer()">getRemotePeer</a></span>()</code></th>
<td class="colLast">
<div class="block">The peer are we talking to.</div>
</td>
</tr>
<tr class="altColor" id="i50">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRemotePort()">getRemotePort</a></span>()</code></th>
<td class="colLast">
<div class="block">what port is the peer sending and receiving packets on?</div>
</td>
</tr>
<tr class="rowColor" id="i51">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRTO()">getRTO</a></span>()</code></th>
<td class="colLast">
<div class="block">how soon should we retransmit an unacked packet?</div>
</td>
</tr>
<tr class="altColor" id="i52">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRTT()">getRTT</a></span>()</code></th>
<td class="colLast">
<div class="block">how long does it usually take to get a message ACKed?</div>
</td>
</tr>
<tr class="rowColor" id="i53">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRTTDeviation()">getRTTDeviation</a></span>()</code></th>
<td class="colLast">
<div class="block">how skewed are the measured RTTs?</div>
</td>
</tr>
<tr class="altColor" id="i54">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSendBps()">getSendBps</a></span>()</code></th>
<td class="colLast">
<div class="block">The Westwood+ bandwidth estimate</div>
</td>
</tr>
<tr class="rowColor" id="i55">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSendWindowBytes()">getSendWindowBytes</a></span>()</code></th>
<td class="colLast">
<div class="block">how many bytes should we send to the peer in a second
  1st stat in CWND column, otherwise unused,
  candidate for removal</div>
</td>
</tr>
<tr class="altColor" id="i56">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSendWindowBytesRemaining()">getSendWindowBytesRemaining</a></span>()</code></th>
<td class="colLast">
<div class="block">how many bytes can we send to the peer in the current second</div>
</td>
</tr>
<tr class="rowColor" id="i57">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSlowStartThreshold()">getSlowStartThreshold</a></span>()</code></th>
<td class="colLast">
<div class="block">stat in SST column, otherwise unused,
  candidate for removal</div>
</td>
</tr>
<tr class="altColor" id="i58">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTheyRelayToUsAs()">getTheyRelayToUsAs</a></span>()</code></th>
<td class="colLast">
<div class="block">If they have offered to serve as an introducer to us, this is the tag
 we can use to publish that fact.</div>
</td>
</tr>
<tr class="rowColor" id="i59">
<td class="colFirst"><code>(package private) <a href="UDPTransport.html" title="class in net.i2p.router.transport.udp">UDPTransport</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTransport()">getTransport</a></span>()</code></th>
<td class="colLast">
<div class="block">Convenience for OutboundMessageState so it can fail itself</div>
</td>
</tr>
<tr class="altColor" id="i60">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getWantedACKSendSince()">getWantedACKSendSince</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i61">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getWeRelayToThemAs()">getWeRelayToThemAs</a></span>()</code></th>
<td class="colLast">
<div class="block">if we are serving as an introducer to them, this is the the tag that
 they can publish that, when presented to us, will cause us to send
 a relay introduction to the current peer</div>
</td>
</tr>
<tr class="altColor" id="i62">
<td class="colFirst"><code>(package private) boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#highestSeqNumAcked(long)">highestSeqNumAcked</a></span>&#8203;(long&nbsp;highest)</code></th>
<td class="colLast">
<div class="block">Enter or leave fast retransmit mode, and adjust
  SST and window variables accordingly.</div>
</td>
</tr>
<tr class="rowColor" id="i63">
<td class="colFirst"><code>(package private) int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#incrementConsecutiveFailedSends()">incrementConsecutiveFailedSends</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i64">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isBacklogged()">isBacklogged</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i65">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isInbound()">isInbound</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i66">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isIPv6()">isIPv6</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i67">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#loadFrom(net.i2p.router.transport.udp.PeerState)">loadFrom</a></span>&#8203;(<a href="PeerState.html" title="class in net.i2p.router.transport.udp">PeerState</a>&nbsp;oldPeer)</code></th>
<td class="colLast">
<div class="block">Transfer the basic activity/state from the old peer to the current peer</div>
</td>
</tr>
<tr class="altColor" id="i68">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#messageFullyReceived(java.lang.Long,int)">messageFullyReceived</a></span>&#8203;(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>&nbsp;messageId,
int&nbsp;bytes)</code></th>
<td class="colLast">
<div class="block">We received the message specified completely.</div>
</td>
</tr>
<tr class="rowColor" id="i69">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#messagePartiallyReceived()">messagePartiallyReceived</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i70">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#messageRetransmitted(int)">messageRetransmitted</a></span>&#8203;(int&nbsp;packets)</code></th>
<td class="colLast">
<div class="block">we are resending a packet, so lets jack up the rto</div>
</td>
</tr>
<tr class="rowColor" id="i71">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#packetReceived(int)">packetReceived</a></span>&#8203;(int&nbsp;size)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i72">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#packetsTransmitted(int)">packetsTransmitted</a></span>&#8203;(int&nbsp;packets)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i73">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeACKMessage(java.lang.Long)">removeACKMessage</a></span>&#8203;(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>&nbsp;messageId)</code></th>
<td class="colLast">
<div class="block">The ack was sent.</div>
</td>
</tr>
<tr class="altColor" id="i74">
<td class="colFirst"><code>(package private) <a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="ACKBitfield.html" title="interface in net.i2p.router.transport.udp">ACKBitfield</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#retrieveACKBitfields()">retrieveACKBitfields</a></span>()</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">unused</div>
</div>
</td>
</tr>
<tr class="rowColor" id="i75">
<td class="colFirst"><code>(package private) <a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="ACKBitfield.html" title="interface in net.i2p.router.transport.udp">ACKBitfield</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#retrieveACKBitfields(boolean)">retrieveACKBitfields</a></span>&#8203;(boolean&nbsp;alwaysIncludeRetransmissions)</code></th>
<td class="colLast">
<div class="block">See above.</div>
</td>
</tr>
<tr class="altColor" id="i76">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setCurrentCipherKey(net.i2p.data.SessionKey)">setCurrentCipherKey</a></span>&#8203;(<a href="../../../data/SessionKey.html" title="class in net.i2p.data">SessionKey</a>&nbsp;key)</code></th>
<td class="colLast">
<div class="block">The AES key used to encrypt/decrypt packets, set only after the
 connection is established.</div>
</td>
</tr>
<tr class="rowColor" id="i77">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setCurrentMACKey(net.i2p.data.SessionKey)">setCurrentMACKey</a></span>&#8203;(<a href="../../../data/SessionKey.html" title="class in net.i2p.data">SessionKey</a>&nbsp;key)</code></th>
<td class="colLast">
<div class="block">The AES key used to verify packets, set only after the connection is
 established.</div>
</td>
</tr>
<tr class="altColor" id="i78">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setHisMTU(int)">setHisMTU</a></span>&#8203;(int&nbsp;mtu)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i79">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setIntroducerTime()">setIntroducerTime</a></span>()</code></th>
<td class="colLast">
<div class="block">set the last time we used them as an introducer to now</div>
</td>
</tr>
<tr class="altColor" id="i80">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setLastACKSend(long)">setLastACKSend</a></span>&#8203;(long&nbsp;when)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">unused</div>
</div>
</td>
</tr>
<tr class="rowColor" id="i81">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setLastPingTime(long)">setLastPingTime</a></span>&#8203;(long&nbsp;when)</code></th>
<td class="colLast">
<div class="block">Note ping sent.</div>
</td>
</tr>
<tr class="altColor" id="i82">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setLastReceiveTime(long)">setLastReceiveTime</a></span>&#8203;(long&nbsp;when)</code></th>
<td class="colLast">
<div class="block">when did we last receive a packet from them?</div>
</td>
</tr>
<tr class="rowColor" id="i83">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setLastSendTime(long)">setLastSendTime</a></span>&#8203;(long&nbsp;when)</code></th>
<td class="colLast">
<div class="block">when did we last send them a packet?</div>
</td>
</tr>
<tr class="altColor" id="i84">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setMayDisconnect()">setMayDisconnect</a></span>()</code></th>
<td class="colLast">
<div class="block">Sets to true.</div>
</td>
</tr>
<tr class="rowColor" id="i85">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setTheyRelayToUsAs(long)">setTheyRelayToUsAs</a></span>&#8203;(long&nbsp;tag)</code></th>
<td class="colLast">
<div class="block">If they have offered to serve as an introducer to us, this is the tag
 we can use to publish that fact.</div>
</td>
</tr>
<tr class="altColor" id="i86">
<td class="colFirst"><code>(package private) void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setWeRelayToThemAs(long)">setWeRelayToThemAs</a></span>&#8203;(long&nbsp;tag)</code></th>
<td class="colLast">
<div class="block">if we are serving as an introducer to them, this is the the tag that
 they can publish that, when presented to us, will cause us to send
 a relay introduction to the current peer</div>
</td>
</tr>
<tr class="rowColor" id="i87">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#toString()">toString</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i88">
<td class="colFirst"><code>(package private) boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#unsentACKThresholdReached()">unsentACKThresholdReached</a></span>()</code></th>
<td class="colLast">
<div class="block">Are we out of room to send all the current unsent acks in a single packet?
  This is a huge threshold (134 for small MTU and 255 for large MTU)
  that is rarely if ever exceeded in practice.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<a id="methods.inherited.from.class.java.lang.Object">
</a><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<li class="blockList">
<section class="fieldDetails"><a id="field.detail">
</a>
<h2>Field Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="RETRANSMISSION_PERIOD_WIDTH">RETRANSMISSION_PERIOD_WIDTH</a></h3>
<div class="memberSignature"><span class="modifiers">static final</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">RETRANSMISSION_PERIOD_WIDTH</span></div>
<div class="block">how many packets will be considered within the retransmission rate calculation</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.udp.PeerState.RETRANSMISSION_PERIOD_WIDTH">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="MIN_MTU">MIN_MTU</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">MIN_MTU</span></div>
<div class="block">IPv4 Min MTU

 596 gives us 588 IP byes, 568 UDP bytes, and with an SSU data message,
 522 fragment bytes, which is enough to send a tunnel data message in 2
 packets. A tunnel data message sent over the wire is 1044 bytes, meaning
 we need 522 fragment bytes to fit it in 2 packets - add 46 for SSU, 20
 for UDP, and 8 for IP, giving us 596.  round up to mod 16, giving a total
 of 608

 Well, we really need to count the acks as well, especially
 1 + (4 * MAX_RESEND_ACKS_SMALL) which can take up a significant amount of space.
 We reduce the max acks when using the small MTU but it may not be enough...

 Goal: VTBM msg fragments 2646 / (620 - 87) fits nicely.

 Assuming that we can enforce an MTU correctly, this % 16 should be 12,
 as the IP/UDP header is 28 bytes and data max should be mulitple of 16 for padding efficiency,
 and so PacketBuilder.buildPacket() works correctly.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.udp.PeerState.MIN_MTU">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="MIN_IPV6_MTU">MIN_IPV6_MTU</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">MIN_IPV6_MTU</span></div>
<div class="block">IPv6/UDP header is 48 bytes, so we want MTU % 16 == 0.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.udp.PeerState.MIN_IPV6_MTU">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="MAX_IPV6_MTU">MAX_IPV6_MTU</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">MAX_IPV6_MTU</span></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.udp.PeerState.MAX_IPV6_MTU">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="LARGE_MTU">LARGE_MTU</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">LARGE_MTU</span></div>
<div class="block">IPv4 Max MTU

 based on measurements, 1350 fits nearly all reasonably small I2NP messages
 (larger I2NP messages may be up to 1900B-4500B, which isn't going to fit
 into a live network MTU anyway)

 TODO
 VTBM is 2646, it would be nice to fit in two large
 2646 / 2 = 1323
 1323 + 74 + 46 + 1 + (4 * 9) = 1480
 So why not make it 1492 (old ethernet is 1492, new is 1500)
 Changed to 1492 in 0.8.9

 BUT through 0.8.11,
 size estimate was bad, actual packet was up to 48 bytes bigger
 To be figured out. Curse the ACKs.
 Assuming that we can enforce an MTU correctly, this % 16 should be 12,
 as the IP/UDP header is 28 bytes and data max should be mulitple of 16 for padding efficiency,
 and so PacketBuilder.buildPacket() works correctly.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#net.i2p.router.transport.udp.PeerState.LARGE_MTU">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="MAX_MTU">MAX_MTU</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">MAX_MTU</span></div>
<div class="block">Max of IPv4 and IPv6 max MTUs</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.28</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(net.i2p.router.RouterContext,net.i2p.router.transport.udp.UDPTransport,byte[],int,net.i2p.data.Hash,boolean,int)">PeerState</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">PeerState</span>&#8203;(<span class="arguments"><a href="../../RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx,
<a href="UDPTransport.html" title="class in net.i2p.router.transport.udp">UDPTransport</a>&nbsp;transport,
byte[]&nbsp;remoteIP,
int&nbsp;remotePort,
<a href="../../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;remotePeer,
boolean&nbsp;isInbound,
int&nbsp;rtt)</span></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rtt</code> - from the EstablishState, or 0 if not available</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="changePort(int)">changePort</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">changePort</span>&#8203;(<span class="arguments">int&nbsp;newPort)</span></div>
<div class="block">Caller should sync; UDPTransport must remove and add to peersByRemoteHost map</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.3</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getRemotePeer()">getRemotePeer</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../../../data/Hash.html" title="class in net.i2p.data">Hash</a></span>&nbsp;<span class="memberName">getRemotePeer</span>()</div>
<div class="block">The peer are we talking to.  This should be set as soon as this
 state is created if we are initiating a connection, but if we are
 receiving the connection this will be set only after the connection
 is established.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getCurrentMACKey()">getCurrentMACKey</a></h3>
<div class="memberSignature"><span class="returnType"><a href="../../../data/SessionKey.html" title="class in net.i2p.data">SessionKey</a></span>&nbsp;<span class="memberName">getCurrentMACKey</span>()</div>
<div class="block">The AES key used to verify packets, set only after the connection is
 established.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getCurrentCipherKey()">getCurrentCipherKey</a></h3>
<div class="memberSignature"><span class="returnType"><a href="../../../data/SessionKey.html" title="class in net.i2p.data">SessionKey</a></span>&nbsp;<span class="memberName">getCurrentCipherKey</span>()</div>
<div class="block">The AES key used to encrypt/decrypt packets, set only after the
 connection is established.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getNextMACKey()">getNextMACKey</a></h3>
<div class="memberSignature"><span class="returnType"><a href="../../../data/SessionKey.html" title="class in net.i2p.data">SessionKey</a></span>&nbsp;<span class="memberName">getNextMACKey</span>()</div>
<div class="block">The pending AES key for verifying packets if we are rekeying the
 connection, or null if we are not in the process of rekeying.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>null always, rekeying unimplemented</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getNextCipherKey()">getNextCipherKey</a></h3>
<div class="memberSignature"><span class="returnType"><a href="../../../data/SessionKey.html" title="class in net.i2p.data">SessionKey</a></span>&nbsp;<span class="memberName">getNextCipherKey</span>()</div>
<div class="block">The pending AES key for encrypting/decrypting packets if we are
 rekeying the connection, or null if we are not in the process
 of rekeying.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>null always, rekeying unimplemented</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getKeyEstablishedTime()">getKeyEstablishedTime</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getKeyEstablishedTime</span>()</div>
<div class="block">when were the current cipher and MAC keys established/rekeyed?</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getClockSkew()">getClockSkew</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getClockSkew</span>()</div>
<div class="block">How far off is the remote peer from our clock, in milliseconds?
  A positive number means our clock is ahead of theirs.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getLastSendTime()">getLastSendTime</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getLastSendTime</span>()</div>
<div class="block">when did we last send them a packet?</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getLastSendFullyTime()">getLastSendFullyTime</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getLastSendFullyTime</span>()</div>
<div class="block">when did we last send them a message that was ACKed?</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getLastReceiveTime()">getLastReceiveTime</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getLastReceiveTime</span>()</div>
<div class="block">when did we last receive a packet from them?</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getConsecutiveFailedSends()">getConsecutiveFailedSends</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getConsecutiveFailedSends</span>()</div>
<div class="block">how many seconds have we sent packets without any ACKs received?</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getSendWindowBytes()">getSendWindowBytes</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getSendWindowBytes</span>()</div>
<div class="block">how many bytes should we send to the peer in a second
  1st stat in CWND column, otherwise unused,
  candidate for removal</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getSendWindowBytesRemaining()">getSendWindowBytesRemaining</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getSendWindowBytesRemaining</span>()</div>
<div class="block">how many bytes can we send to the peer in the current second</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getRemoteIP()">getRemoteIP</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">byte[]</span>&nbsp;<span class="memberName">getRemoteIP</span>()</div>
<div class="block">what IP is the peer sending and receiving packets on?</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getRemoteIPAddress()">getRemoteIPAddress</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html?is-external=true" title="class or interface in java.net" class="externalLink">InetAddress</a></span>&nbsp;<span class="memberName">getRemoteIPAddress</span>()</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>may be null if IP is invalid</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getRemotePort()">getRemotePort</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getRemotePort</span>()</div>
<div class="block">what port is the peer sending and receiving packets on?</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getWeRelayToThemAs()">getWeRelayToThemAs</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getWeRelayToThemAs</span>()</div>
<div class="block">if we are serving as an introducer to them, this is the the tag that
 they can publish that, when presented to us, will cause us to send
 a relay introduction to the current peer</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>0 (no relay) if unset previously</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getTheyRelayToUsAs()">getTheyRelayToUsAs</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getTheyRelayToUsAs</span>()</div>
<div class="block">If they have offered to serve as an introducer to us, this is the tag
 we can use to publish that fact.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>0 (no relay) if unset previously</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getMTU()">getMTU</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getMTU</span>()</div>
<div class="block">what is the largest packet we can send to the peer?</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getReceiveMTU()">getReceiveMTU</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getReceiveMTU</span>()</div>
<div class="block">Estimate how large the other side's MTU is.
  This could be wrong.
  It is used only for the HTML status.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setCurrentMACKey(net.i2p.data.SessionKey)">setCurrentMACKey</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">setCurrentMACKey</span>&#8203;(<span class="arguments"><a href="../../../data/SessionKey.html" title="class in net.i2p.data">SessionKey</a>&nbsp;key)</span></div>
<div class="block">The AES key used to verify packets, set only after the connection is
 established.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setCurrentCipherKey(net.i2p.data.SessionKey)">setCurrentCipherKey</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">setCurrentCipherKey</span>&#8203;(<span class="arguments"><a href="../../../data/SessionKey.html" title="class in net.i2p.data">SessionKey</a>&nbsp;key)</span></div>
<div class="block">The AES key used to encrypt/decrypt packets, set only after the
 connection is established.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="adjustClockSkew(long)">adjustClockSkew</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">adjustClockSkew</span>&#8203;(<span class="arguments">long&nbsp;skew)</span></div>
<div class="block">Update the moving-average clock skew based on the current difference.
  The raw skew will be adjusted for RTT/2 here.
  A positive number means our clock is ahead of theirs.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>skew</code> - milliseconds, NOT adjusted for RTT.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setLastSendTime(long)">setLastSendTime</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">setLastSendTime</span>&#8203;(<span class="arguments">long&nbsp;when)</span></div>
<div class="block">when did we last send them a packet?</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setLastReceiveTime(long)">setLastReceiveTime</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">setLastReceiveTime</span>&#8203;(<span class="arguments">long&nbsp;when)</span></div>
<div class="block">when did we last receive a packet from them?</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setLastPingTime(long)">setLastPingTime</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">setLastPingTime</span>&#8203;(<span class="arguments">long&nbsp;when)</span></div>
<div class="block">Note ping sent. Does not update last send time.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.3</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getLastSendOrPingTime()">getLastSendOrPingTime</a></h3>
<div class="memberSignature"><span class="returnType">long</span>&nbsp;<span class="memberName">getLastSendOrPingTime</span>()</div>
<div class="block">Latest of last sent, last ACK, last ping</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.3</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getSendBps()">getSendBps</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getSendBps</span>()</div>
<div class="block">The Westwood+ bandwidth estimate</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the smoothed send transfer rate</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getReceiveBps()">getReceiveBps</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getReceiveBps</span>()</div>
<div class="block">An approximation, for display only</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the smoothed receive transfer rate</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="incrementConsecutiveFailedSends()">incrementConsecutiveFailedSends</a></h3>
<div class="memberSignature"><span class="returnType">int</span>&nbsp;<span class="memberName">incrementConsecutiveFailedSends</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getInactivityTime()">getInactivityTime</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getInactivityTime</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setWeRelayToThemAs(long)">setWeRelayToThemAs</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">setWeRelayToThemAs</span>&#8203;(<span class="arguments">long&nbsp;tag)</span></div>
<div class="block">if we are serving as an introducer to them, this is the the tag that
 they can publish that, when presented to us, will cause us to send
 a relay introduction to the current peer</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tag</code> - 1 to Integer.MAX_VALUE, or 0 if relaying disabled</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setTheyRelayToUsAs(long)">setTheyRelayToUsAs</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">setTheyRelayToUsAs</span>&#8203;(<span class="arguments">long&nbsp;tag)</span></div>
<div class="block">If they have offered to serve as an introducer to us, this is the tag
 we can use to publish that fact.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>tag</code> - 1 to Integer.MAX_VALUE, or 0 if relaying disabled</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getSlowStartThreshold()">getSlowStartThreshold</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getSlowStartThreshold</span>()</div>
<div class="block">stat in SST column, otherwise unused,
  candidate for removal</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getConcurrentSends()">getConcurrentSends</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getConcurrentSends</span>()</div>
<div class="block">2nd stat in CWND column, otherwise unused,
  candidate for removal</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getConcurrentSendWindow()">getConcurrentSendWindow</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getConcurrentSendWindow</span>()</div>
<div class="block">3rd stat in CWND column, otherwise unused,
  candidate for removal</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getConsecutiveSendRejections()">getConsecutiveSendRejections</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getConsecutiveSendRejections</span>()</div>
<div class="block">4th stat in CWND column, otherwise unused,
  candidate for removal</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="isInbound()">isInbound</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">isInbound</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="isIPv6()">isIPv6</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">isIPv6</span>()</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>IPv6</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getIntroducerTime()">getIntroducerTime</a></h3>
<div class="memberSignature"><span class="returnType">long</span>&nbsp;<span class="memberName">getIntroducerTime</span>()</div>
<div class="block">the last time we used them as an introducer, or 0</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setIntroducerTime()">setIntroducerTime</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">setIntroducerTime</span>()</div>
<div class="block">set the last time we used them as an introducer to now</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="messageFullyReceived(java.lang.Long,int)">messageFullyReceived</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">messageFullyReceived</span>&#8203;(<span class="arguments"><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>&nbsp;messageId,
int&nbsp;bytes)</span></div>
<div class="block">We received the message specified completely.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bytes</code> - if less than or equal to zero, message is a duplicate.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="messagePartiallyReceived()">messagePartiallyReceived</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">messagePartiallyReceived</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getInboundMessages()">getInboundMessages</a></h3>
<div class="memberSignature"><span class="returnType"><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util" class="externalLink">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>,&#8203;<a href="InboundMessageState.html" title="class in net.i2p.router.transport.udp">InboundMessageState</a>&gt;</span>&nbsp;<span class="memberName">getInboundMessages</span>()</div>
<div class="block">Fetch the internal id (Long) to InboundMessageState for incomplete inbound messages.
 Access to this map must be synchronized explicitly!</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="expireInboundMessages()">expireInboundMessages</a></h3>
<div class="memberSignature"><span class="returnType">int</span>&nbsp;<span class="memberName">expireInboundMessages</span>()</div>
<div class="block">Expire partially received inbound messages, returning how many are still pending.
 This should probably be fired periodically, in case a peer goes silent and we don't
 try to send them any messages (and don't receive any messages from them either)</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getCurrentFullACKs()">getCurrentFullACKs</a></h3>
<div class="memberSignature"><span class="returnType"><a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>&gt;</span>&nbsp;<span class="memberName">getCurrentFullACKs</span>()</div>
<div class="block">Grab a list of message ids (Long) that we want to send to the remote
 peer, regardless of the packet size, but don't remove it from our
 "want to send" list.  If the message id is transmitted to the peer,
 removeACKMessage(Long) should be called.

 The returned list contains acks not yet sent only.
 The caller should NOT transmit all of them all the time,
 even if there is room,
 or the packets will have way too much overhead.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a new list, do as you like with it</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getCurrentResendACKs()">getCurrentResendACKs</a></h3>
<div class="memberSignature"><span class="returnType"><a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>&gt;</span>&nbsp;<span class="memberName">getCurrentResendACKs</span>()</div>
<div class="block">Grab a list of message ids (Long) that we want to send to the remote
 peer, regardless of the packet size, but don't remove it from our
 "want to send" list.

 The returned list contains
 a random assortment of acks already sent.
 The caller should NOT transmit all of them all the time,
 even if there is room,
 or the packets will have way too much overhead.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a new list, do as you like with it</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.8.12 was included in getCurrentFullACKs()</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="removeACKMessage(java.lang.Long)">removeACKMessage</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">removeACKMessage</span>&#8203;(<span class="arguments"><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang" class="externalLink">Long</a>&nbsp;messageId)</span></div>
<div class="block">The ack was sent.
 Side effect - sets _lastACKSend</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="retrieveACKBitfields()">retrieveACKBitfields</a></h3>
<div class="memberSignature"><span class="annotations"><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang" class="externalLink">@Deprecated</a>
</span><span class="returnType"><a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="ACKBitfield.html" title="interface in net.i2p.router.transport.udp">ACKBitfield</a>&gt;</span>&nbsp;<span class="memberName">retrieveACKBitfields</span>()</div>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">unused</div>
</div>
<div class="block">grab a list of ACKBitfield instances, some of which may fully
 ACK a message while others may only partially ACK a message.
 the values returned are limited in size so that they will fit within
 the peer's current MTU as an ACK - as such, not all messages may be
 ACKed with this call.  Be sure to check getWantedACKSendSince() which
 will be unchanged if there are ACKs remaining.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>non-null, possibly empty</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="retrieveACKBitfields(boolean)">retrieveACKBitfields</a></h3>
<div class="memberSignature"><span class="returnType"><a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="ACKBitfield.html" title="interface in net.i2p.router.transport.udp">ACKBitfield</a>&gt;</span>&nbsp;<span class="memberName">retrieveACKBitfields</span>&#8203;(<span class="arguments">boolean&nbsp;alwaysIncludeRetransmissions)</span></div>
<div class="block">See above. Only called by ACKSender with alwaysIncludeRetransmissions = false.
 So this is only for ACK-only packets, so all the size limiting is useless.
 FIXME.
 Side effect - sets _lastACKSend if rv is non-empty</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>non-null, possibly empty</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="fetchPartialACKs(java.util.List)">fetchPartialACKs</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">fetchPartialACKs</span>&#8203;(<span class="arguments"><a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="ACKBitfield.html" title="interface in net.i2p.router.transport.udp">ACKBitfield</a>&gt;&nbsp;rv)</span></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rv</code> - out parameter, populated with true partial ACKBitfields.
            no full bitfields are included.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setHisMTU(int)">setHisMTU</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">setHisMTU</span>&#8203;(<span class="arguments">int&nbsp;mtu)</span></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.2</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="messageRetransmitted(int)">messageRetransmitted</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">messageRetransmitted</span>&#8203;(<span class="arguments">int&nbsp;packets)</span></div>
<div class="block">we are resending a packet, so lets jack up the rto</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="packetsTransmitted(int)">packetsTransmitted</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">packetsTransmitted</span>&#8203;(<span class="arguments">int&nbsp;packets)</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getRTT()">getRTT</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getRTT</span>()</div>
<div class="block">how long does it usually take to get a message ACKed?</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getRTO()">getRTO</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getRTO</span>()</div>
<div class="block">how soon should we retransmit an unacked packet?</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getRTTDeviation()">getRTTDeviation</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getRTTDeviation</span>()</div>
<div class="block">how skewed are the measured RTTs?</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getMessagesSent()">getMessagesSent</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getMessagesSent</span>()</div>
<div class="block">I2NP messages sent.
  Does not include duplicates.
  As of 0.9.24, incremented when bandwidth is allocated just before sending, not when acked.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getMessagesReceived()">getMessagesReceived</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getMessagesReceived</span>()</div>
<div class="block">I2NP messages received.
  As of 0.9.24, does not include duplicates.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getPacketsTransmitted()">getPacketsTransmitted</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getPacketsTransmitted</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getPacketsRetransmitted()">getPacketsRetransmitted</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getPacketsRetransmitted</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getPacketsReceived()">getPacketsReceived</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getPacketsReceived</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getPacketsReceivedDuplicate()">getPacketsReceivedDuplicate</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getPacketsReceivedDuplicate</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="packetReceived(int)">packetReceived</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">packetReceived</span>&#8203;(<span class="arguments">int&nbsp;size)</span></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>size</code> - not including IP header, UDP header, MAC or IV</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="ECNReceived()">ECNReceived</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">ECNReceived</span>()</div>
<div class="block">We received a backoff request, so cut our send window.
  NOTE: ECN sending is unimplemented, this is never called.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="dataReceived()">dataReceived</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">dataReceived</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getLastACKSend()">getLastACKSend</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getLastACKSend</span>()</div>
<div class="block">when did we last send an ACK to the peer?</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setLastACKSend(long)">setLastACKSend</a></h3>
<div class="memberSignature"><span class="annotations"><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang" class="externalLink">@Deprecated</a>
</span><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setLastACKSend</span>&#8203;(<span class="arguments">long&nbsp;when)</span></div>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">unused</div>
</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getWantedACKSendSince()">getWantedACKSendSince</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getWantedACKSendSince</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="unsentACKThresholdReached()">unsentACKThresholdReached</a></h3>
<div class="memberSignature"><span class="returnType">boolean</span>&nbsp;<span class="memberName">unsentACKThresholdReached</span>()</div>
<div class="block">Are we out of room to send all the current unsent acks in a single packet?
  This is a huge threshold (134 for small MTU and 255 for large MTU)
  that is rarely if ever exceeded in practice.
  So just use a fixed threshold of half the resend acks, so that if the
  packet is lost the acks have a decent chance of getting retransmitted.
  Used only by ACKSender.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getRemoteHostId()">getRemoteHostId</a></h3>
<div class="memberSignature"><span class="returnType"><a href="RemoteHostId.html" title="class in net.i2p.router.transport.udp">RemoteHostId</a></span>&nbsp;<span class="memberName">getRemoteHostId</span>()</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>non-null</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="add(net.i2p.router.transport.udp.OutboundMessageState)">add</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">add</span>&#8203;(<span class="arguments"><a href="OutboundMessageState.html" title="class in net.i2p.router.transport.udp">OutboundMessageState</a>&nbsp;state)</span></div>
<div class="block">TODO should this use a queue, separate from the list of msgs pending an ack?
  TODO bring back tail drop?
  TODO priority queue? (we don't implement priorities in SSU now)
  TODO backlog / pushback / block instead of dropping? Can't really block here.
  TODO SSU does not support isBacklogged() now</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="dropOutbound()">dropOutbound</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">dropOutbound</span>()</div>
<div class="block">drop all outbound messages</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getOutboundMessageCount()">getOutboundMessageCount</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getOutboundMessageCount</span>()</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of active outbound messages remaining (unsynchronized)</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="setMayDisconnect()">setMayDisconnect</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">setMayDisconnect</span>()</div>
<div class="block">Sets to true.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.24</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getMayDisconnect()">getMayDisconnect</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">getMayDisconnect</span>()</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.24</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="finishMessages(long)">finishMessages</a></h3>
<div class="memberSignature"><span class="returnType">int</span>&nbsp;<span class="memberName">finishMessages</span>&#8203;(<span class="arguments">long&nbsp;now)</span></div>
<div class="block">Expire / complete any outbound messages
 High usage -
 OutboundMessageFragments.getNextVolley() calls this 1st.
 TODO combine finishMessages(), allocateSend(), and getNextDelay() so we don't iterate 3 times.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>number of active outbound messages remaining</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="allocateSend(long)">allocateSend</a></h3>
<div class="memberSignature"><span class="returnType"><a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="OutboundMessageState.html" title="class in net.i2p.router.transport.udp">OutboundMessageState</a>&gt;</span>&nbsp;<span class="memberName">allocateSend</span>&#8203;(<span class="arguments">long&nbsp;now)</span></div>
<div class="block">Pick one or more messages we want to send and allocate them out of our window
 Adjusts the retransmit timer if necessary.
 High usage -
 OutboundMessageFragments.getNextVolley() calls this 2nd, if finishMessages() returned &gt; 0.
 TODO combine finishMessages() and allocateSend() so we don't iterate 2 times.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>allocated messages to send (never empty), or null if no messages or no resources</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getNextDelay(long)">getNextDelay</a></h3>
<div class="memberSignature"><span class="returnType">int</span>&nbsp;<span class="memberName">getNextDelay</span>&#8203;(<span class="arguments">long&nbsp;now)</span></div>
<div class="block">High usage -
 OutboundMessageFragments.getNextVolley() calls this 3rd, if allocateSend() returned null.
 TODO combine finishMessages(), allocateSend() so we don't iterate 2 times.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>now</code> - what time it is now</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>how long to wait before sending, or Integer.MAX_VALUE if we have nothing to send.
         If ready now, will return 0.</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="isBacklogged()">isBacklogged</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">isBacklogged</span>()</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.3</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="fragmentSize()">fragmentSize</a></h3>
<div class="memberSignature"><span class="returnType">int</span>&nbsp;<span class="memberName">fragmentSize</span>()</div>
<div class="block">how much payload data can we shove in there?</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>MTU - 87, i.e. 533 or 1397 (IPv4), MTU - 107 (IPv6)</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="fragmentOverhead()">fragmentOverhead</a></h3>
<div class="memberSignature"><span class="returnType">int</span>&nbsp;<span class="memberName">fragmentOverhead</span>()</div>
<div class="block">Packet overhead plus room for acks</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>87 (IPv4), 107 (IPv6)</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.49</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="acked(long,net.i2p.router.transport.udp.InboundMessageFragments.ModifiableLong)">acked</a></h3>
<div class="memberSignature"><span class="returnType">boolean</span>&nbsp;<span class="memberName">acked</span>&#8203;(<span class="arguments">long&nbsp;messageId,
<a href="InboundMessageFragments.ModifiableLong.html" title="class in net.i2p.router.transport.udp">InboundMessageFragments.ModifiableLong</a>&nbsp;highestSeqNumAcked)</span></div>
<div class="block">A full ACK was received.
  TODO if messages awaiting ack were a HashMap&lt;Long, OutboundMessageState&gt; this would be faster.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>highestSeqNumAcked</code> - in/out param, will modify if this seq. number is higher</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if the message was acked for the first time</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="acked(net.i2p.router.transport.udp.ACKBitfield,net.i2p.router.transport.udp.InboundMessageFragments.ModifiableLong)">acked</a></h3>
<div class="memberSignature"><span class="returnType">boolean</span>&nbsp;<span class="memberName">acked</span>&#8203;(<span class="arguments"><a href="ACKBitfield.html" title="interface in net.i2p.router.transport.udp">ACKBitfield</a>&nbsp;bitfield,
<a href="InboundMessageFragments.ModifiableLong.html" title="class in net.i2p.router.transport.udp">InboundMessageFragments.ModifiableLong</a>&nbsp;highestSeqNumAcked)</span></div>
<div class="block">A partial ACK was received. This is much less common than full ACKs.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>highestSeqNumAcked</code> - in/out param, will modify if this seq. number is higher</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if any fragment of the message was completely acked for the first time</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="highestSeqNumAcked(long)">highestSeqNumAcked</a></h3>
<div class="memberSignature"><span class="returnType">boolean</span>&nbsp;<span class="memberName">highestSeqNumAcked</span>&#8203;(<span class="arguments">long&nbsp;highest)</span></div>
<div class="block">Enter or leave fast retransmit mode, and adjust
  SST and window variables accordingly.
  See RFC 5681 sec. 2.4</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>highest</code> - the highest sequence number that was acked</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if we have something to fast-retransmit</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.49</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="loadFrom(net.i2p.router.transport.udp.PeerState)">loadFrom</a></h3>
<div class="memberSignature"><span class="returnType">void</span>&nbsp;<span class="memberName">loadFrom</span>&#8203;(<span class="arguments"><a href="PeerState.html" title="class in net.i2p.router.transport.udp">PeerState</a>&nbsp;oldPeer)</span></div>
<div class="block">Transfer the basic activity/state from the old peer to the current peer</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>oldPeer</code> - non-null</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getTransport()">getTransport</a></h3>
<div class="memberSignature"><span class="returnType"><a href="UDPTransport.html" title="class in net.i2p.router.transport.udp">UDPTransport</a></span>&nbsp;<span class="memberName">getTransport</span>()</div>
<div class="block">Convenience for OutboundMessageState so it can fail itself</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.3</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="toString()">toString</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a></span>&nbsp;<span class="memberName">toString</span>()</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
</main>
<footer role="contentinfo">
<nav role="navigation">
<div class="bottomNav"><a id="navbar.bottom">
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PeerState.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
</a>
</nav>
</footer>
</div>
</div>
</body>
</html>
