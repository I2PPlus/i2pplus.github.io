<!DOCTYPE HTML>
<html lang="en">
<head>
<title>TunnelDispatcher - Javadocs [I2P+ 0.9.50]</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: net.i2p.router.tunnel, class: TunnelDispatcher">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>

<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>

<script type="text/javascript" src="../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":9,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":42,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<style type="text/css">.script{display:none!important}</style>

</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<div class="topNav"><a id="navbar.top">
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TunnelDispatcher.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch script"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<div class="skipNav"><a id="skip.navbar.top">
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">net.i2p.router.tunnel</a></div>
<h1 title="Class TunnelDispatcher" class="title">Class TunnelDispatcher</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree"><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a>
<div class="inheritance">net.i2p.router.tunnel.TunnelDispatcher</div>
</div>
<section class="description">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../Service.html" title="interface in net.i2p.router">Service</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">TunnelDispatcher</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>
implements <a href="../Service.html" title="interface in net.i2p.router">Service</a></pre>
<div class="block">Handle the actual processing and forwarding of messages through the
 various tunnels.

<pre>
  For each type of tunnel, it creates a chain of handlers, as follows:

  Following tunnels are created by us:

    Outbound Gateway &gt; 0 hops:
       PumpedTunnelGateway
         BatchedRouterPreprocessor -&gt; OutboundSender -&gt; OutboundReceiver -&gt; OutNetMessagePool

    Outbound zero-hop Gateway+Endpoint:
       TunnelGatewayZeroHop
         OutboundMessageDistributor -&gt; OutNetMessagePool

    Inbound Endpoint &gt; 0 hops:
       TunnelParticipant
        RouterFragmentHandler -&gt;  InboundEndpointProcessor -&gt; InboundMessageDistributor -&gt; InNetMessagePool

    Inbound zero-hop Gateway+Endpoint:
       TunnelGatewayZeroHop
         InboundMessageDistributor -&gt; InNetMessagePool  Following tunnels are NOT created by us:

    Participant (not gateway or endpoint)
       TunnelParticipant
         HopProcessor -&gt; OutNetMessagePool

    Outbound Endpoint &gt; 0 hops:
       OutboundTunnelEndpoint
         RouterFragmentHandler -&gt; HopProcessor -&gt; OutboundMessageDistributor -&gt; OutNetMessagePool

    Inbound Gateway &gt; 0 hops:
       ThrottledPumpedTunnelGateway
         BatchedRouterPreprocessor -&gt; InboundSender -&gt; InboundGatewayReceiver -&gt; OutNetMessagePool

</pre></div>
</section>
<section class="summary">
<ul class="blockList">
<li class="blockList">
<section class="nestedClassSummary"><a id="nested.class.summary">
</a>
<h2>Nested Class Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>(package private) static class&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="TunnelDispatcher.Location.html" title="enum in net.i2p.router.tunnel">TunnelDispatcher.Location</a></span></code></th>
<td class="colLast">
<div class="block">for shouldDropParticipatingMessage()</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(net.i2p.router.RouterContext)">TunnelDispatcher</a></span>&#8203;(<a href="../RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx)</code></th>
<td class="colLast">
<div class="block">Creates a new instance of TunnelDispatcher</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div class="script" role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="tableTab" onclick="show(1);">Static Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t6" class="tableTab" onclick="show(32);">Deprecated Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#dispatch(net.i2p.data.i2np.TunnelDataMessage,net.i2p.data.Hash)">dispatch</a></span>&#8203;(<a href="../../data/i2np/TunnelDataMessage.html" title="class in net.i2p.data.i2np">TunnelDataMessage</a>&nbsp;msg,
<a href="../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;recvFrom)</code></th>
<td class="colLast">
<div class="block">We are participating in a tunnel (perhaps we're even the endpoint), so
 take the message and do what it says.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#dispatch(net.i2p.data.i2np.TunnelGatewayMessage)">dispatch</a></span>&#8203;(<a href="../../data/i2np/TunnelGatewayMessage.html" title="class in net.i2p.data.i2np">TunnelGatewayMessage</a>&nbsp;msg)</code></th>
<td class="colLast">
<div class="block">We are the inbound tunnel gateway, so encrypt it as necessary and forward
 it on.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#dispatchOutbound(net.i2p.data.i2np.I2NPMessage,net.i2p.data.TunnelId,net.i2p.data.Hash)">dispatchOutbound</a></span>&#8203;(<a href="../../data/i2np/I2NPMessage.html" title="interface in net.i2p.data.i2np">I2NPMessage</a>&nbsp;msg,
<a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;outboundTunnel,
<a href="../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;targetPeer)</code></th>
<td class="colLast">
<div class="block">We are the outbound tunnel gateway (we created it), so wrap up this message
 with instructions to be forwarded to the targetPeer when it reaches the
 endpoint.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#dispatchOutbound(net.i2p.data.i2np.I2NPMessage,net.i2p.data.TunnelId,net.i2p.data.TunnelId,net.i2p.data.Hash)">dispatchOutbound</a></span>&#8203;(<a href="../../data/i2np/I2NPMessage.html" title="interface in net.i2p.data.i2np">I2NPMessage</a>&nbsp;msg,
<a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;outboundTunnel,
<a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;targetTunnel,
<a href="../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;targetPeer)</code></th>
<td class="colLast">
<div class="block">We are the outbound tunnel gateway (we created it), so wrap up this message
 with instructions to be forwarded to the targetTunnel on the targetPeer when
 it reaches the endpoint.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastParticipatingExpiration()">getLastParticipatingExpiration</a></span>()</code></th>
<td class="colLast">
<div class="block">what is the date/time on which the last non-locally-created tunnel expires?</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code><a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNewIBEPID()">getNewIBEPID</a></span>()</code></th>
<td class="colLast">
<div class="block">Get a new random receive tunnel ID that isn't a dup.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code><a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNewIBZeroHopID()">getNewIBZeroHopID</a></span>()</code></th>
<td class="colLast">
<div class="block">Get a new random receive tunnel ID that isn't a dup.</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code><a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNewOBGWID()">getNewOBGWID</a></span>()</code></th>
<td class="colLast">
<div class="block">Get a new random send tunnel ID that isn't a dup.</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getParticipatingCount()">getParticipatingCount</a></span>()</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>static int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getShareBandwidth(net.i2p.router.RouterContext)">getShareBandwidth</a></span>&#8203;(<a href="../RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#joinInbound(net.i2p.router.tunnel.TunnelCreatorConfig)">joinInbound</a></span>&#8203;(<a href="TunnelCreatorConfig.html" title="class in net.i2p.router.tunnel">TunnelCreatorConfig</a>&nbsp;cfg)</code></th>
<td class="colLast">
<div class="block">We are the inbound endpoint - we created this tunnel</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#joinInboundGateway(net.i2p.router.tunnel.HopConfig)">joinInboundGateway</a></span>&#8203;(<a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</code></th>
<td class="colLast">
<div class="block">We are the inbound gateway in this tunnel, and did not create it</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#joinOutbound(net.i2p.router.tunnel.TunnelCreatorConfig)">joinOutbound</a></span>&#8203;(<a href="TunnelCreatorConfig.html" title="class in net.i2p.router.tunnel">TunnelCreatorConfig</a>&nbsp;cfg)</code></th>
<td class="colLast">
<div class="block">We are the outbound gateway - we created this tunnel</div>
</td>
</tr>
<tr class="rowColor" id="i13">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#joinOutboundEndpoint(net.i2p.router.tunnel.HopConfig)">joinOutboundEndpoint</a></span>&#8203;(<a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</code></th>
<td class="colLast">
<div class="block">We are the outbound endpoint in this tunnel, and did not create it</div>
</td>
</tr>
<tr class="altColor" id="i14">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#joinParticipant(net.i2p.router.tunnel.HopConfig)">joinParticipant</a></span>&#8203;(<a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</code></th>
<td class="colLast">
<div class="block">We are a participant in this tunnel, but not as the endpoint or gateway</div>
</td>
</tr>
<tr class="rowColor" id="i15">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#listParticipatingTunnels()">listParticipatingTunnels</a></span>()</code></th>
<td class="colLast">
<div class="block">Only for console TunnelRenderer.</div>
</td>
</tr>
<tr class="altColor" id="i16">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#remove(net.i2p.router.tunnel.HopConfig)">remove</a></span>&#8203;(<a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</code></th>
<td class="colLast">
<div class="block">No longer participate in the tunnel that someone asked us to be a member of</div>
</td>
</tr>
<tr class="rowColor" id="i17">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#remove(net.i2p.router.tunnel.TunnelCreatorConfig)">remove</a></span>&#8203;(<a href="TunnelCreatorConfig.html" title="class in net.i2p.router.tunnel">TunnelCreatorConfig</a>&nbsp;cfg)</code></th>
<td class="colLast">
<div class="block">We no longer want to participate in this tunnel that we created</div>
</td>
</tr>
<tr class="altColor" id="i18">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#renderStatusHTML(java.io.Writer)">renderStatusHTML</a></span>&#8203;(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html?is-external=true" title="class or interface in java.io" class="externalLink">Writer</a>&nbsp;out)</code></th>
<td class="colLast">
<div class="block"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">moved to router console</div>
</div>
</td>
</tr>
<tr class="rowColor" id="i19">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#restart()">restart</a></span>()</code></th>
<td class="colLast">
<div class="block">Perform a soft restart.</div>
</td>
</tr>
<tr class="altColor" id="i20">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shouldDropParticipatingMessage(net.i2p.router.tunnel.TunnelDispatcher.Location,int,int)">shouldDropParticipatingMessage</a></span>&#8203;(<a href="TunnelDispatcher.Location.html" title="enum in net.i2p.router.tunnel">TunnelDispatcher.Location</a>&nbsp;loc,
int&nbsp;type,
int&nbsp;length)</code></th>
<td class="colLast">
<div class="block">Implement random early discard (RED) to enforce the share bandwidth limit.</div>
</td>
</tr>
<tr class="rowColor" id="i21">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#shutdown()">shutdown</a></span>()</code></th>
<td class="colLast">
<div class="block">Instruct the service that the router is shutting down and that it should do
 whatever is necessary to go down gracefully.</div>
</td>
</tr>
<tr class="altColor" id="i22">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#startup()">startup</a></span>()</code></th>
<td class="colLast">
<div class="block">startup</div>
</td>
</tr>
<tr class="rowColor" id="i23">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#updateParticipatingStats(int)">updateParticipatingStats</a></span>&#8203;(int&nbsp;ms)</code></th>
<td class="colLast">
<div class="block">Generate a current estimate of usage per-participating-tunnel lifetime.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<a id="methods.inherited.from.class.java.lang.Object">
</a><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(net.i2p.router.RouterContext)">TunnelDispatcher</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">TunnelDispatcher</span>&#8203;(<span class="arguments"><a href="../RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx)</span></div>
<div class="block">Creates a new instance of TunnelDispatcher</div>
</section>
</li>
</ul>
</section>
</li>
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="joinOutbound(net.i2p.router.tunnel.TunnelCreatorConfig)">joinOutbound</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">joinOutbound</span>&#8203;(<span class="arguments"><a href="TunnelCreatorConfig.html" title="class in net.i2p.router.tunnel">TunnelCreatorConfig</a>&nbsp;cfg)</span></div>
<div class="block">We are the outbound gateway - we created this tunnel</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>success; false if Tunnel ID is a duplicate</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="joinInbound(net.i2p.router.tunnel.TunnelCreatorConfig)">joinInbound</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">joinInbound</span>&#8203;(<span class="arguments"><a href="TunnelCreatorConfig.html" title="class in net.i2p.router.tunnel">TunnelCreatorConfig</a>&nbsp;cfg)</span></div>
<div class="block">We are the inbound endpoint - we created this tunnel</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>success; false if Tunnel ID is a duplicate</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="joinParticipant(net.i2p.router.tunnel.HopConfig)">joinParticipant</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">joinParticipant</span>&#8203;(<span class="arguments"><a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</span></div>
<div class="block">We are a participant in this tunnel, but not as the endpoint or gateway</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>success; false if Tunnel ID is a duplicate</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="joinOutboundEndpoint(net.i2p.router.tunnel.HopConfig)">joinOutboundEndpoint</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">joinOutboundEndpoint</span>&#8203;(<span class="arguments"><a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</span></div>
<div class="block">We are the outbound endpoint in this tunnel, and did not create it</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>success; false if Tunnel ID is a duplicate</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="joinInboundGateway(net.i2p.router.tunnel.HopConfig)">joinInboundGateway</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">joinInboundGateway</span>&#8203;(<span class="arguments"><a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</span></div>
<div class="block">We are the inbound gateway in this tunnel, and did not create it</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>success; false if Tunnel ID is a duplicate</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getParticipatingCount()">getParticipatingCount</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getParticipatingCount</span>()</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getNewOBGWID()">getNewOBGWID</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a></span>&nbsp;<span class="memberName">getNewOBGWID</span>()</div>
<div class="block">Get a new random send tunnel ID that isn't a dup.
  Note that we do not keep track of IDs for pending builds so this
  does not fully prevent joinOutbound() from failing later.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.5</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getNewIBEPID()">getNewIBEPID</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a></span>&nbsp;<span class="memberName">getNewIBEPID</span>()</div>
<div class="block">Get a new random receive tunnel ID that isn't a dup.
  Not for zero hop tunnels.
  Note that we do not keep track of IDs for pending builds so this
  does not fully prevent joinInbound() from failing later.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.5</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getNewIBZeroHopID()">getNewIBZeroHopID</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a></span>&nbsp;<span class="memberName">getNewIBZeroHopID</span>()</div>
<div class="block">Get a new random receive tunnel ID that isn't a dup.
  For zero hop tunnels only.
  Note that we do not keep track of IDs for pending builds so this
  does not fully prevent joinInbound() from failing later.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.5</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getLastParticipatingExpiration()">getLastParticipatingExpiration</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getLastParticipatingExpiration</span>()</div>
<div class="block">what is the date/time on which the last non-locally-created tunnel expires?</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="remove(net.i2p.router.tunnel.TunnelCreatorConfig)">remove</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">remove</span>&#8203;(<span class="arguments"><a href="TunnelCreatorConfig.html" title="class in net.i2p.router.tunnel">TunnelCreatorConfig</a>&nbsp;cfg)</span></div>
<div class="block">We no longer want to participate in this tunnel that we created</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="remove(net.i2p.router.tunnel.HopConfig)">remove</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">remove</span>&#8203;(<span class="arguments"><a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&nbsp;cfg)</span></div>
<div class="block">No longer participate in the tunnel that someone asked us to be a member of</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="dispatch(net.i2p.data.i2np.TunnelDataMessage,net.i2p.data.Hash)">dispatch</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">dispatch</span>&#8203;(<span class="arguments"><a href="../../data/i2np/TunnelDataMessage.html" title="class in net.i2p.data.i2np">TunnelDataMessage</a>&nbsp;msg,
<a href="../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;recvFrom)</span></div>
<div class="block">We are participating in a tunnel (perhaps we're even the endpoint), so
 take the message and do what it says.  If there are later hops, that
 means encrypt a layer and forward it on.  If there aren't later hops,
 how we handle it depends upon whether we created it or not.  If we didn't,
 simply honor the instructions.  If we did, unwrap all the layers of
 encryption and honor those instructions (within reason).</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="dispatch(net.i2p.data.i2np.TunnelGatewayMessage)">dispatch</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">dispatch</span>&#8203;(<span class="arguments"><a href="../../data/i2np/TunnelGatewayMessage.html" title="class in net.i2p.data.i2np">TunnelGatewayMessage</a>&nbsp;msg)</span></div>
<div class="block">We are the inbound tunnel gateway, so encrypt it as necessary and forward
 it on.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="dispatchOutbound(net.i2p.data.i2np.I2NPMessage,net.i2p.data.TunnelId,net.i2p.data.Hash)">dispatchOutbound</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">dispatchOutbound</span>&#8203;(<span class="arguments"><a href="../../data/i2np/I2NPMessage.html" title="interface in net.i2p.data.i2np">I2NPMessage</a>&nbsp;msg,
<a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;outboundTunnel,
<a href="../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;targetPeer)</span></div>
<div class="block">We are the outbound tunnel gateway (we created it), so wrap up this message
 with instructions to be forwarded to the targetPeer when it reaches the
 endpoint.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msg</code> - raw message to deliver to the target peer</dd>
<dd><code>outboundTunnel</code> - tunnel to send the message out, or null for direct</dd>
<dd><code>targetPeer</code> - peer to receive the message</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="dispatchOutbound(net.i2p.data.i2np.I2NPMessage,net.i2p.data.TunnelId,net.i2p.data.TunnelId,net.i2p.data.Hash)">dispatchOutbound</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">dispatchOutbound</span>&#8203;(<span class="arguments"><a href="../../data/i2np/I2NPMessage.html" title="interface in net.i2p.data.i2np">I2NPMessage</a>&nbsp;msg,
<a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;outboundTunnel,
<a href="../../data/TunnelId.html" title="class in net.i2p.data">TunnelId</a>&nbsp;targetTunnel,
<a href="../../data/Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;targetPeer)</span></div>
<div class="block">We are the outbound tunnel gateway (we created it), so wrap up this message
 with instructions to be forwarded to the targetTunnel on the targetPeer when
 it reaches the endpoint.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msg</code> - raw message to deliver to the targetTunnel on the targetPeer</dd>
<dd><code>outboundTunnel</code> - tunnel to send the message out</dd>
<dd><code>targetTunnel</code> - tunnel on the targetPeer to deliver the message to, or null for direct</dd>
<dd><code>targetPeer</code> - gateway to the tunnel to receive the message</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="listParticipatingTunnels()">listParticipatingTunnels</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util" class="externalLink">List</a>&lt;<a href="HopConfig.html" title="class in net.i2p.router.tunnel">HopConfig</a>&gt;</span>&nbsp;<span class="memberName">listParticipatingTunnels</span>()</div>
<div class="block">Only for console TunnelRenderer.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a copy</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="updateParticipatingStats(int)">updateParticipatingStats</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">updateParticipatingStats</span>&#8203;(<span class="arguments">int&nbsp;ms)</span></div>
<div class="block">Generate a current estimate of usage per-participating-tunnel lifetime.
 The router code calls this every 'ms' millisecs.
 This is better than waiting until the tunnel expires to update the rate,
 as we want this to be current because it's an important part of
 the throttle code.
 Stay a little conservative by taking the counts only for tunnels 1-10m old
 and computing the average from that.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="shouldDropParticipatingMessage(net.i2p.router.tunnel.TunnelDispatcher.Location,int,int)">shouldDropParticipatingMessage</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">shouldDropParticipatingMessage</span>&#8203;(<span class="arguments"><a href="TunnelDispatcher.Location.html" title="enum in net.i2p.router.tunnel">TunnelDispatcher.Location</a>&nbsp;loc,
int&nbsp;type,
int&nbsp;length)</span></div>
<div class="block">Implement random early discard (RED) to enforce the share bandwidth limit.
 For now, this does not enforce the available bandwidth,
 we leave that to Throttle.
 This is similar to the code in ../RouterThrottleImpl.java
 We drop in proportion to how far over the limit we are.
 Perhaps an exponential function would be better?

 The drop probability is adjusted for the size of the message.
 At this stage, participants and IBGWs see a standard 1024 byte message.
 OBEPs however may see a wide variety of sizes.

 Network-wise, it's most efficient to drop OBEP messages, because they
 are unfragmented and we know their size. Therefore we drop the big ones
 and we drop a single wrapped I2CP message, not a fragment of one or more messages.
 Also, the OBEP is the earliest identifiable hop in the message's path
 (a plain participant could be earlier or later, but on average is later)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>loc</code> - message hop location</dd>
<dd><code>type</code> - I2NP message type</dd>
<dd><code>length</code> - the length of the message</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="startup()">startup</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">startup</span>()</div>
<div class="block">startup</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Service.html#startup()">startup</a></code>&nbsp;in interface&nbsp;<code><a href="../Service.html" title="interface in net.i2p.router">Service</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getShareBandwidth(net.i2p.router.RouterContext)">getShareBandwidth</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">getShareBandwidth</span>&#8203;(<span class="arguments"><a href="../RouterContext.html" title="class in net.i2p.router">RouterContext</a>&nbsp;ctx)</span></div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>in KBps</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="shutdown()">shutdown</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">shutdown</span>()</div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Service.html#shutdown()">Service</a></code></span></div>
<div class="block">Instruct the service that the router is shutting down and that it should do
 whatever is necessary to go down gracefully.  It should not depend on other
 components at this point.  This call DOES block.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Service.html#shutdown()">shutdown</a></code>&nbsp;in interface&nbsp;<code><a href="../Service.html" title="interface in net.i2p.router">Service</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="restart()">restart</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">restart</span>()</div>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../Service.html#restart()">Service</a></code></span></div>
<div class="block">Perform a soft restart.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Service.html#restart()">restart</a></code>&nbsp;in interface&nbsp;<code><a href="../Service.html" title="interface in net.i2p.router">Service</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="renderStatusHTML(java.io.Writer)">renderStatusHTML</a></h3>
<div class="memberSignature"><span class="annotations"><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang" class="externalLink">@Deprecated</a>
</span><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">renderStatusHTML</span>&#8203;(<span class="arguments"><a href="http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html?is-external=true" title="class or interface in java.io" class="externalLink">Writer</a>&nbsp;out)</span>
                      throws <span class="exceptions"><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></span></div>
<div class="deprecationBlock"><span class="deprecatedLabel">Deprecated.</span>
<div class="deprecationComment">moved to router console</div>
</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../Service.html#renderStatusHTML(java.io.Writer)">renderStatusHTML</a></code>&nbsp;in interface&nbsp;<code><a href="../Service.html" title="interface in net.i2p.router">Service</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io" class="externalLink">IOException</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
</main>
<footer role="contentinfo">
<nav role="navigation">
<div class="bottomNav"><a id="navbar.bottom">
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TunnelDispatcher.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
</a>
</nav>
</footer>
</div>
</div>
</body>
</html>
