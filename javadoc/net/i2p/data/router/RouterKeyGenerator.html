<!DOCTYPE HTML>
<html lang="en">
<head>
<title>RouterKeyGenerator - Javadocs [I2P+ 0.9.50]</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: net.i2p.data.router, class: RouterKeyGenerator">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>

<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>

<script type="text/javascript" src="../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<style type="text/css">.script{display:none!important}</style>

</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<div class="topNav"><a id="navbar.top">
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RouterKeyGenerator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch script"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<div class="skipNav"><a id="skip.navbar.top">
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">net.i2p.data.router</a></div>
<h1 title="Class RouterKeyGenerator" class="title">Class RouterKeyGenerator</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree"><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a>
<div class="inheritance"><a href="../RoutingKeyGenerator.html" title="class in net.i2p.data">net.i2p.data.RoutingKeyGenerator</a>
<div class="inheritance">net.i2p.data.router.RouterKeyGenerator</div>
</div>
</div>
<section class="description">
<hr>
<pre>public class <span class="typeNameLabel">RouterKeyGenerator</span>
extends <a href="../RoutingKeyGenerator.html" title="class in net.i2p.data">RoutingKeyGenerator</a></pre>
<div class="block">Component to manage the munging of hashes into routing keys - given a hash, 
 perform some consistent transformation against it and return the result.
 This transformation is fed by the current "mod data".  

 Right now the mod data is the current date (GMT) as a string: "yyyyMMdd",
 and the transformation takes the original hash, appends the bytes of that mod data,
 then returns the SHA256 of that concatenation.

 Do we want this to simply do the XOR of the SHA256 of the current mod data and
 the key?  does that provide the randomization we need?  It'd save an SHA256 op.
 Bah, too much effort to think about for so little gain.  Other algorithms may come
 into play layer on about making periodic updates to the routing key for data elements
 to mess with Sybil.  This may be good enough though.

 Also - the method generateDateBasedModData() should be called after midnight GMT 
 once per day to generate the correct routing keys!</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.16 moved from net.i2p.data.RoutingKeyGenerator..</dd>
</dl>
</section>
<section class="summary">
<ul class="blockList">
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(net.i2p.I2PAppContext)">RouterKeyGenerator</a></span>&#8203;(<a href="../../I2PAppContext.html" title="class in net.i2p">I2PAppContext</a>&nbsp;context)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div class="script" role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t1" class="tableTab" onclick="show(1);">Static Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#generateDateBasedModData()">generateDateBasedModData</a></span>()</code></th>
<td class="colLast">
<div class="block">Update the current modifier data with some bytes derived from the current
 date (yyyyMMdd in GMT)</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLastChanged()">getLastChanged</a></span>()</code></th>
<td class="colLast">
<div class="block">The version of the current (today's) mod data.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getModData()">getModData</a></span>()</code></th>
<td class="colLast">
<div class="block">The current (today's) mod data.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>byte[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNextModData()">getNextModData</a></span>()</code></th>
<td class="colLast">
<div class="block">Tomorrow's mod data.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code><a href="../Hash.html" title="class in net.i2p.data">Hash</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getNextRoutingKey(net.i2p.data.Hash)">getNextRoutingKey</a></span>&#8203;(<a href="../Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;origKey)</code></th>
<td class="colLast">
<div class="block">Get the routing key using tomorrow's modData, not today's</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code><a href="../Hash.html" title="class in net.i2p.data">Hash</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRoutingKey(net.i2p.data.Hash)">getRoutingKey</a></span>&#8203;(<a href="../Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;origKey)</code></th>
<td class="colLast">
<div class="block">Generate a modified (yet consistent) hash from the origKey by generating the
 SHA256 of the targetKey with the current modData appended to it

 This makes Sybil's job a lot harder, as she needs to essentially take over the
 whole keyspace.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code><a href="../Hash.html" title="class in net.i2p.data">Hash</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getRoutingKey(net.i2p.data.Hash,long)">getRoutingKey</a></span>&#8203;(<a href="../Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;origKey,
long&nbsp;time)</code></th>
<td class="colLast">
<div class="block">Get the routing key for the specified date, not today's</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getTimeTillMidnight()">getTimeTillMidnight</a></span>()</code></th>
<td class="colLast">
<div class="block">How long until midnight (ms)</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>static void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#main(java.lang.String%5B%5D)">main</a></span>&#8203;(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>[]&nbsp;args)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;net.i2p.data.<a href="../RoutingKeyGenerator.html" title="class in net.i2p.data">RoutingKeyGenerator</a></h3>
<a id="methods.inherited.from.class.net.i2p.data.RoutingKeyGenerator">
</a><code><a href="../RoutingKeyGenerator.html#getInstance()">getInstance</a></code></div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<a id="methods.inherited.from.class.java.lang.Object">
</a><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(net.i2p.I2PAppContext)">RouterKeyGenerator</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">RouterKeyGenerator</span>&#8203;(<span class="arguments"><a href="../../I2PAppContext.html" title="class in net.i2p">I2PAppContext</a>&nbsp;context)</span></div>
</section>
</li>
</ul>
</section>
</li>
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="getModData()">getModData</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">byte[]</span>&nbsp;<span class="memberName">getModData</span>()</div>
<div class="block">The current (today's) mod data.
  Warning - not a copy, do not corrupt.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>non-null, 8 bytes</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getNextModData()">getNextModData</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">byte[]</span>&nbsp;<span class="memberName">getNextModData</span>()</div>
<div class="block">Tomorrow's mod data.
  Warning - not a copy, do not corrupt.
  For debugging use only.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>non-null, 8 bytes</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.10</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getLastChanged()">getLastChanged</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getLastChanged</span>()</div>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../RoutingKeyGenerator.html#getLastChanged()">RoutingKeyGenerator</a></code></span></div>
<div class="block">The version of the current (today's) mod data.
  Use to determine if the routing key should be regenerated.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../RoutingKeyGenerator.html#getLastChanged()">getLastChanged</a></code>&nbsp;in class&nbsp;<code><a href="../RoutingKeyGenerator.html" title="class in net.i2p.data">RoutingKeyGenerator</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getTimeTillMidnight()">getTimeTillMidnight</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getTimeTillMidnight</span>()</div>
<div class="block">How long until midnight (ms)</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>could be slightly negative</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.10 moved from UpdateRoutingKeyModifierJob</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="generateDateBasedModData()">generateDateBasedModData</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">generateDateBasedModData</span>()</div>
<div class="block">Update the current modifier data with some bytes derived from the current
 date (yyyyMMdd in GMT)</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if changed</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getRoutingKey(net.i2p.data.Hash)">getRoutingKey</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../Hash.html" title="class in net.i2p.data">Hash</a></span>&nbsp;<span class="memberName">getRoutingKey</span>&#8203;(<span class="arguments"><a href="../Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;origKey)</span></div>
<div class="block">Generate a modified (yet consistent) hash from the origKey by generating the
 SHA256 of the targetKey with the current modData appended to it

 This makes Sybil's job a lot harder, as she needs to essentially take over the
 whole keyspace.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../RoutingKeyGenerator.html#getRoutingKey(net.i2p.data.Hash)">getRoutingKey</a></code>&nbsp;in class&nbsp;<code><a href="../RoutingKeyGenerator.html" title="class in net.i2p.data">RoutingKeyGenerator</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang" class="externalLink">IllegalArgumentException</a></code> - if origKey is null</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getNextRoutingKey(net.i2p.data.Hash)">getNextRoutingKey</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../Hash.html" title="class in net.i2p.data">Hash</a></span>&nbsp;<span class="memberName">getNextRoutingKey</span>&#8203;(<span class="arguments"><a href="../Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;origKey)</span></div>
<div class="block">Get the routing key using tomorrow's modData, not today's</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.10</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getRoutingKey(net.i2p.data.Hash,long)">getRoutingKey</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../Hash.html" title="class in net.i2p.data">Hash</a></span>&nbsp;<span class="memberName">getRoutingKey</span>&#8203;(<span class="arguments"><a href="../Hash.html" title="class in net.i2p.data">Hash</a>&nbsp;origKey,
long&nbsp;time)</span></div>
<div class="block">Get the routing key for the specified date, not today's</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>time</code> - Java time</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.28</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="main(java.lang.String[])">main</a></h3>
<div class="memberSignature"><span class="modifiers">public static</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">main</span>&#8203;(<span class="arguments"><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang" class="externalLink">String</a>[]&nbsp;args)</span></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>0.9.29</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
</main>
<footer role="contentinfo">
<nav role="navigation">
<div class="bottomNav"><a id="navbar.bottom">
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RouterKeyGenerator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
</a>
</nav>
</footer>
</div>
</div>
</body>
</html>
